@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@100..900&family=Noto+Naskh+Arabic:wght@400..700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* LIGHT MODE */
:root {
  --button-outline: rgba(0,0,0, .10);
  --badge-outline: rgba(0,0,0, .05);

  /* Automatic computation of border around primary / danger buttons */
  --opaque-button-border-intensity: -8; /* In terms of percentages */

  /* Backgrounds applied on top of other backgrounds when hovered/active */
  --elevate-1: rgba(0,0,0, .03);
  --elevate-2: rgba(0,0,0, .08);

  --background: 0 0% 98%;

  --foreground: 220 9% 15%;

  --border: 220 13% 91%;

  --card: 0 0% 100%;

  --card-foreground: 220 9% 15%;

  --card-border: 220 13% 89%;

  --sidebar: 220 13% 95%;

  --sidebar-foreground: 220 9% 15%;

  --sidebar-border: 220 13% 91%;

  --sidebar-primary: 142 69% 35%;

  --sidebar-primary-foreground: 142 45% 95%;

  --sidebar-accent: 142 45% 88%;

  --sidebar-accent-foreground: 142 69% 25%;

  --sidebar-ring: 142 69% 58%;

  --popover: 0 0% 97%;

  --popover-foreground: 220 9% 15%;

  --popover-border: 220 13% 89%;

  --primary: 142 69% 35%;

  --primary-foreground: 142 45% 95%;

  --secondary: 220 13% 93%;

  --secondary-foreground: 220 9% 25%;

  --muted: 220 13% 94%;

  --muted-foreground: 220 9% 45%;

  --accent: 142 30% 90%;

  --accent-foreground: 142 69% 25%;

  --destructive: 0 84% 35%;

  --destructive-foreground: 0 84% 95%;

  --input: 220 13% 85%;
  --ring: 142 69% 58%;
  --chart-1: 142 69% 35%;
  --chart-2: 197 37% 35%;
  --chart-3: 43 74% 35%;
  --chart-4: 27 87% 35%;
  --chart-5: 270 95% 35%;

  --font-sans: Open Sans, 'Noto Sans Arabic', sans-serif;
  --font-serif: Georgia, 'Noto Naskh Arabic', serif;
  --font-mono: Menlo, monospace;
  --radius: .5rem; /* 8px */
  --shadow-2xs: 0px 2px 0px 0px hsl(220 13% 91% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(220 13% 91% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 1px 2px -1px hsl(220 13% 91% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 1px 2px -1px hsl(220 13% 91% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 2px 4px -1px hsl(220 13% 91% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 4px 6px -1px hsl(220 13% 91% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 8px 10px -1px hsl(220 13% 91% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(220 13% 91% / 0.00);
  --tracking-normal: 0em;
  --spacing: 0.25rem;

  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */

  /* Fallback for older browsers */
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
}

.dark {
  --button-outline: rgba(255,255,255, .10);
  --badge-outline: rgba(255,255,255, .05);

  --opaque-button-border-intensity: 9;  /* In terms of percentages */

  /* Backgrounds applied on top of other backgrounds when hovered/active */
  --elevate-1: rgba(255,255,255, .04);
  --elevate-2: rgba(255,255,255, .09);

  --background: 220 13% 9%;

  --foreground: 220 9% 89%;

  --border: 220 13% 15%;

  --card: 220 13% 14%;

  --card-foreground: 220 9% 89%;

  --card-border: 220 13% 18%;

  --sidebar: 220 13% 11%;

  --sidebar-foreground: 220 9% 89%;

  --sidebar-border: 220 13% 15%;

  --sidebar-primary: 142 69% 35%;

  --sidebar-primary-foreground: 142 45% 95%;

  --sidebar-accent: 142 30% 16%;

  --sidebar-accent-foreground: 142 45% 75%;

  --sidebar-ring: 142 69% 58%;

  --popover: 220 13% 16%;

  --popover-foreground: 220 9% 89%;

  --popover-border: 220 13% 21%;

  --primary: 142 69% 35%;

  --primary-foreground: 142 45% 95%;

  --secondary: 220 13% 18%;

  --secondary-foreground: 220 9% 75%;

  --muted: 220 13% 15%;

  --muted-foreground: 220 9% 65%;

  --accent: 142 20% 18%;

  --accent-foreground: 142 45% 75%;

  --destructive: 0 84% 35%;

  --destructive-foreground: 0 84% 95%;

  --input: 220 13% 25%;
  --ring: 142 69% 58%;
  --chart-1: 142 69% 65%;
  --chart-2: 197 37% 65%;
  --chart-3: 43 74% 65%;
  --chart-4: 27 87% 65%;
  --chart-5: 270 95% 65%;

  --shadow-2xs: 0px 2px 0px 0px hsl(220 13% 5% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(220 13% 5% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(220 13% 5% / 0.00), 0px 1px 2px -1px hsl(220 13% 5% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(220 13% 5% / 0.00), 0px 1px 2px -1px hsl(220 13% 5% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(220 13% 5% / 0.00), 0px 2px 4px -1px hsl(220 13% 5% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(220 13% 5% / 0.00), 0px 4px 6px -1px hsl(220 13% 5% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(220 13% 5% / 0.00), 0px 8px 10px -1px hsl(220 13% 5% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(220 13% 5% / 0.00);

}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }
}

/**
 * Using the elevate system.
 * Automatic contrast adjustment.
 *
 * <element className="hover-elevate" />
 * <element className="active-elevate-2" />
 *
 * // Using the tailwind utility when a data attribute is "on"
 * <element className="toggle-elevate data-[state=on]:toggle-elevated" />
 * // Or manually controlling the toggle state
 * <element className="toggle-elevate toggle-elevated" />
 *
 * Elevation systems have to handle many states.
 * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)
 * - toggled or not
 * - focused or not (this is not handled with these utilities)
 *
 * Even without handling focused or not, this is six possible combinations that
 * need to be distinguished from eachother visually.
 */
@layer utilities {

  /* Hide ugly search cancel button in Chrome until we can style it properly */
  input[type="search"]::-webkit-search-cancel-button {
    @apply hidden;
  }

  /* RTL support utilities for Arabic text */
  .rtl-support {
    direction: rtl;
  }
  
  .rtl-support input {
    text-align: right;
    direction: rtl;
  }
  
  .rtl-support textarea {
    text-align: right;
    direction: rtl;
  }
  
  .rtl-support .select-trigger {
    direction: rtl;
  }
  
  .rtl-support label {
    text-align: right;
    direction: rtl;
  }
  
  .rtl-support .checkbox-wrapper {
    flex-direction: row-reverse;
  }
  
  .rtl-support .checkbox-wrapper .checkbox-label {
    text-align: right;
    direction: rtl;
  }

  /* Staggered animations for feature cards */
  @keyframes slide-in-from-bottom-4 {
    from {
      opacity: 0;
      transform: translateY(1rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-in-from-bottom-6 {
    from {
      opacity: 0;
      transform: translateY(1.5rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-in-from-bottom-8 {
    from {
      opacity: 0;
      transform: translateY(2rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-in-from-bottom-12 {
    from {
      opacity: 0;
      transform: translateY(3rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-in {
    animation-fill-mode: both;
  }

  .slide-in-from-bottom-4 {
    animation: slide-in-from-bottom-4 0.7s ease-out;
  }

  .slide-in-from-bottom-6 {
    animation: slide-in-from-bottom-6 0.7s ease-out;
  }

  .slide-in-from-bottom-8 {
    animation: slide-in-from-bottom-8 0.7s ease-out;
  }

  .slide-in-from-bottom-12 {
    animation: slide-in-from-bottom-12 0.7s ease-out;
  }

  .delay-150 {
    animation-delay: 150ms;
  }

  .delay-300 {
    animation-delay: 300ms;
  }

  .delay-500 {
    animation-delay: 500ms;
  }

  .delay-1000 {
    animation-delay: 1000ms;
  }

  /* Background grid pattern */
  .bg-grid-white\/10 {
    background-image: url("data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M0.5 0V16M15.5 0V16M0 0.5H16M0 15.5H16' stroke='rgba(255,255,255,0.1)' stroke-width='1'/%3e%3c/svg%3e");
  }

  .bg-grid-16 {
    background-size: 16px 16px;
  }

  /* Line clamp utility */
  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }

  /* Dynamic background animations */
  @keyframes float-slow {
    0%, 100% {
      transform: translateY(0) translateX(0) rotate(0deg);
      opacity: 0.4;
    }
    33% {
      transform: translateY(-20px) translateX(10px) rotate(120deg);
      opacity: 0.6;
    }
    66% {
      transform: translateY(10px) translateX(-15px) rotate(240deg);
      opacity: 0.5;
    }
  }

  @keyframes float-reverse {
    0%, 100% {
      transform: translateY(0) translateX(0) rotate(0deg);
      opacity: 0.3;
    }
    33% {
      transform: translateY(15px) translateX(-12px) rotate(-120deg);
      opacity: 0.7;
    }
    66% {
      transform: translateY(-25px) translateX(8px) rotate(-240deg);
      opacity: 0.4;
    }
  }

  @keyframes grid-float {
    0%, 100% {
      transform: translateX(0) translateY(0);
    }
    25% {
      transform: translateX(2px) translateY(-1px);
    }
    50% {
      transform: translateX(-1px) translateY(2px);
    }
    75% {
      transform: translateX(1px) translateY(1px);
    }
  }

  @keyframes grid-breathe {
    0%, 100% {
      opacity: 0.1;
      transform: scale(1) translateX(0) translateY(0);
    }
    25% {
      opacity: 0.15;
      transform: scale(1.002) translateX(1px) translateY(-0.5px);
    }
    50% {
      opacity: 0.2;
      transform: scale(1.004) translateX(-0.5px) translateY(1px);
    }
    75% {
      opacity: 0.15;
      transform: scale(1.002) translateX(0.5px) translateY(0.5px);
    }
  }

  @keyframes slide-right {
    0% {
      transform: translateX(-100%);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  @keyframes slide-left {
    0% {
      transform: translateX(100%);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translateX(-100%);
      opacity: 0;
    }
  }

  @keyframes pulse-soft {
    0%, 100% {
      opacity: 0.2;
      transform: scale(1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.3);
    }
  }

  .animate-float-slow {
    animation: float-slow 12s ease-in-out infinite;
  }

  .animate-float-reverse {
    animation: float-reverse 15s ease-in-out infinite;
  }

  .animate-grid-float {
    animation: grid-float 20s ease-in-out infinite;
  }

  .animate-grid-breathe {
    animation: grid-breathe 18s ease-in-out infinite;
  }

  .animate-slide-right {
    animation: slide-right 8s linear infinite;
  }

  .animate-slide-left {
    animation: slide-left 10s linear infinite;
  }

  .animate-pulse-soft {
    animation: pulse-soft 4s ease-in-out infinite;
  }

  @keyframes slide-in-from-left {
    from {
      opacity: 0;
      transform: translateX(-2rem);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .slide-in-from-left {
    animation: slide-in-from-left 0.7s ease-out;
  }

  /* Placeholder styling for contentEditable div */
  [contenteditable][data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: hsl(var(--muted-foreground));
    pointer-events: none;
  }

  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of
   * buttons/badges can remove the automatic brightness adjustment on interactions
   * and program their own. */
  .no-default-hover-elevate {}

  .no-default-active-elevate {}


  /**
   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.
   * This way they can stack/compound. Both will overlap the parent's borders!
   * So borders will be automatically adjusted both on toggle, and hover/active,
   * and they will be compounded.
   */
  .toggle-elevate::before,
  .toggle-elevate-2::before {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: -1;
    /* sits behind content but above backdrop */
  }

  .toggle-elevate.toggle-elevated::before {
    background-color: var(--elevate-2);
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  .border.toggle-elevate::before {
    inset: -1px;
  }

  /* Does not work on elements with overflow:hidden! */
  .hover-elevate:not(.no-default-hover-elevate),
  .active-elevate:not(.no-default-active-elevate),
  .hover-elevate-2:not(.no-default-hover-elevate),
  .active-elevate-2:not(.no-default-active-elevate) {
    position: relative;
    z-index: 0;
  }

  .hover-elevate:not(.no-default-hover-elevate)::after,
  .active-elevate:not(.no-default-active-elevate)::after,
  .hover-elevate-2:not(.no-default-hover-elevate)::after,
  .active-elevate-2:not(.no-default-active-elevate)::after {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: 999;
    /* sits in front of content */
  }

  .hover-elevate:hover:not(.no-default-hover-elevate)::after,
  .active-elevate:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-1);
  }

  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,
  .active-elevate-2:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-2);
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }

  /* Islamic geometric pattern background */
  /* Global mobile optimizations */
  html {
    scroll-behavior: smooth;
  }
  
  /* iOS safe area support */
  .sticky {
    padding-top: env(safe-area-inset-top);
  }
  
  /* Scroll margin for anchored sections to prevent header overlap */
  #diensten, #registratie, #contact {
    scroll-margin-top: 4rem; /* matches header height */
  }
  
  /* Mobile-specific optimizations */
  @media (max-width: 768px) {
    /* Better mobile scrolling */
    html {
      -webkit-overflow-scrolling: touch;
    }
    
    /* Ensure header safe area on mobile */
    header.sticky {
      padding-top: env(safe-area-inset-top);
    }
    
    /* Improved mobile touch targets - minimum 44px */
    button, a, input, select, textarea, [role="button"], [role="link"] {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Better mobile text rendering */
    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }
    
    /* Remove default tap highlight on iOS */
    * {
      -webkit-tap-highlight-color: transparent;
    }
    
    /* Custom tap feedback */
    button:active, [role="button"]:active, a:active {
      transform: scale(0.98);
      transition: transform 0.1s ease-in-out;
    }
    
    /* Prevent horizontal scroll on mobile */
    body {
      overflow-x: hidden;
    }
    
    /* Better mobile form elements - prevent iOS zoom */
    input, select, textarea {
      font-size: 16px !important; /* Prevents zoom on iOS */
    }
    
    /* Ensure anchored sections account for mobile header */
    #diensten, #registratie, #contact {
      scroll-margin-top: 3.5rem; /* mobile header height */
    }
  }

  .islamic-pattern {
    background-image: 
      /* 8-pointed stars pattern */
      conic-gradient(from 0deg at 50% 50%, 
        rgba(255, 255, 255, 0.02) 0deg, 
        transparent 22.5deg, 
        rgba(255, 255, 255, 0.025) 45deg, 
        transparent 67.5deg, 
        rgba(255, 255, 255, 0.02) 90deg, 
        transparent 112.5deg, 
        rgba(255, 255, 255, 0.025) 135deg, 
        transparent 157.5deg,
        rgba(255, 255, 255, 0.02) 180deg, 
        transparent 202.5deg, 
        rgba(255, 255, 255, 0.025) 225deg, 
        transparent 247.5deg, 
        rgba(255, 255, 255, 0.02) 270deg, 
        transparent 292.5deg, 
        rgba(255, 255, 255, 0.025) 315deg, 
        transparent 337.5deg, 
        rgba(255, 255, 255, 0.02) 360deg
      ),
      /* Secondary star pattern offset */
      conic-gradient(from 22.5deg at 50% 50%, 
        transparent 0deg, 
        rgba(255, 255, 255, 0.015) 22.5deg, 
        transparent 45deg, 
        rgba(255, 255, 255, 0.015) 67.5deg, 
        transparent 90deg, 
        rgba(255, 255, 255, 0.015) 112.5deg, 
        transparent 135deg, 
        rgba(255, 255, 255, 0.015) 157.5deg,
        transparent 180deg, 
        rgba(255, 255, 255, 0.015) 202.5deg, 
        transparent 225deg, 
        rgba(255, 255, 255, 0.015) 247.5deg, 
        transparent 270deg, 
        rgba(255, 255, 255, 0.015) 292.5deg, 
        transparent 315deg, 
        rgba(255, 255, 255, 0.015) 337.5deg, 
        transparent 360deg
      ),
      /* Geometric connecting lines */
      linear-gradient(45deg, transparent 49%, rgba(255, 255, 255, 0.01) 50%, transparent 51%),
      linear-gradient(-45deg, transparent 49%, rgba(255, 255, 255, 0.01) 50%, transparent 51%),
      linear-gradient(0deg, transparent 49%, rgba(255, 255, 255, 0.008) 50%, transparent 51%),
      linear-gradient(90deg, transparent 49%, rgba(255, 255, 255, 0.008) 50%, transparent 51%),
      /* Subtle dot grid */
      radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.015) 1px, transparent 1px),
      radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.015) 1px, transparent 1px);
    background-size: 
      120px 120px,
      120px 120px,
      60px 60px,
      60px 60px,
      30px 30px,
      30px 30px,
      40px 40px,
      40px 40px;
    background-position: 
      0 0,
      60px 60px,
      0 0,
      0 0,
      0 0,
      0 0,
      0 0,
      20px 20px;
  }

  /* ======================================
   * SERENE GREEN ANIMATION SYSTEM
   * ====================================== */

  /* Base serene surface container */
  .serene-surface {
    @apply relative overflow-hidden;
  }

  /* Breathing gradient animation keyframes */
  @keyframes gradientShift-60 {
    0%, 100% {
      opacity: 0.06;
      background-position: 0% 0%;
    }
    25% {
      opacity: 0.08;
      background-position: 100% 0%;
    }
    50% {
      opacity: 0.10;
      background-position: 100% 100%;
    }
    75% {
      opacity: 0.07;
      background-position: 0% 100%;
    }
  }

  /* Slow pattern movement keyframes */
  @keyframes slow-pan-150 {
    0% {
      background-position: 0% 0%, 0% 0%;
    }
    25% {
      background-position: 5% 5%, -2% 3%;
    }
    50% {
      background-position: 10% 10%, -5% 5%;
    }
    75% {
      background-position: 5% 15%, -3% 8%;
    }
    100% {
      background-position: 0% 20%, 0% 10%;
    }
  }

  /* Serene breathing gradient overlay */
  .serene-gradient::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background: radial-gradient(
        circle at 30% 20%,
        hsl(var(--primary) / 0.06) 0%,
        hsl(var(--accent) / 0.04) 35%,
        transparent 70%
      ),
      radial-gradient(
        ellipse at 70% 80%,
        hsl(var(--primary) / 0.08) 0%,
        hsl(var(--muted) / 0.05) 40%,
        transparent 75%
      ),
      linear-gradient(
        135deg,
        hsl(var(--accent) / 0.05) 0%,
        hsl(var(--primary) / 0.03) 50%,
        hsl(var(--muted) / 0.04) 100%
      );
    animation: gradientShift-60 60s ease-in-out infinite;
    will-change: opacity;
  }

  /* Islamic geometric pattern overlay */
  .serene-pattern::after {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    opacity: 0.06;
    background-image: 
      /* Simplified Islamic star pattern */
      url("data:image/svg+xml,%3csvg width='80' height='80' viewBox='0 0 80 80' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M40 8 L52 32 L76 32 L58 48 L64 72 L40 60 L16 72 L22 48 L4 32 L28 32 Z' fill='hsl(142,69%,35%)' fill-opacity='0.08'/%3e%3cpath d='M40 20 L48 36 L64 36 L52 46 L56 62 L40 56 L24 62 L28 46 L16 36 L32 36 Z' fill='hsl(142,30%,90%)' fill-opacity='0.06'/%3e%3c/svg%3e"),
      /* Connecting geometric lines */
      url("data:image/svg+xml,%3csvg width='40' height='40' viewBox='0 0 40 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M0 20 L40 20 M20 0 L20 40' stroke='hsl(142,69%,35%)' stroke-opacity='0.04' stroke-width='1'/%3e%3c/svg%3e");
    background-size: 80px 80px, 40px 40px;
    background-repeat: repeat;
    animation: slow-pan-150 150s linear infinite;
    will-change: background-position;
  }

  /* Text readability veil for dense content */
  .serene-veil::before {
    background: hsl(var(--background) / 0.80);
    z-index: 0;
  }

  /* Dark mode adjustments */
  .dark .serene-gradient::before {
    background: radial-gradient(
        circle at 30% 20%,
        hsl(var(--accent) / 0.08) 0%,
        hsl(var(--primary) / 0.06) 35%,
        transparent 70%
      ),
      radial-gradient(
        ellipse at 70% 80%,
        hsl(var(--primary) / 0.06) 0%,
        hsl(var(--muted) / 0.06) 40%,
        transparent 75%
      ),
      linear-gradient(
        135deg,
        hsl(var(--accent) / 0.08) 0%,
        hsl(var(--primary) / 0.04) 50%,
        hsl(var(--muted) / 0.06) 100%
      );
  }

  .dark .serene-pattern::after {
    opacity: 0.08;
    background-image: 
      url("data:image/svg+xml,%3csvg width='80' height='80' viewBox='0 0 80 80' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M40 8 L52 32 L76 32 L58 48 L64 72 L40 60 L16 72 L22 48 L4 32 L28 32 Z' fill='hsl(142,45%,75%)' fill-opacity='0.08'/%3e%3cpath d='M40 20 L48 36 L64 36 L52 46 L56 62 L40 56 L24 62 L28 46 L16 36 L32 36 Z' fill='hsl(142,20%,18%)' fill-opacity='0.06'/%3e%3c/svg%3e"),
      url("data:image/svg+xml,%3csvg width='40' height='40' viewBox='0 0 40 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M0 20 L40 20 M20 0 L20 40' stroke='hsl(142,45%,75%)' stroke-opacity='0.06' stroke-width='1'/%3e%3c/svg%3e");
  }

  .dark .serene-veil::before {
    background: hsl(var(--background) / 0.85);
  }

  /* Accessibility: Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .serene-gradient::before,
    .serene-pattern::after {
      animation: none;
    }
    
    .serene-gradient::before {
      background: linear-gradient(
        135deg,
        hsl(var(--accent) / 0.05) 0%,
        hsl(var(--primary) / 0.03) 50%,
        hsl(var(--muted) / 0.04) 100%
      );
    }
  }
}